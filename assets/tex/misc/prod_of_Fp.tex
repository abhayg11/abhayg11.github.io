
\documentclass[12pt]{exam}
\input{../tmpl/packages.tex}
\input{../tmpl/defs.tex}

\begin{document}
\pagestyle{plain}
\thispagestyle{empty}

\noindent
\begin{tabular*}{\textwidth}{l @{\extracolsep{\fill}} r @{\extracolsep{6pt}} l}
\textbf{On the product of $\FF_p$} & \textbf{Name:} & Abhay Goel \\
& \textbf{Last updated:} & \today \\
\end{tabular*}\\
\rule[2ex]{\textwidth}{2pt}

\section*{The problem}

\begin{exercise} Let $R = \prod_p \FF_p$, with $p$ ranging over the set of all prime numbers. Prove that $R$ has a maximal ideal $\frm$ for which the field $R/\frm$ has characteristic zero and contains an algebraic closure of $\QQ$. \end{exercise}

Before attacking it directly, let's develop some theory.

\section*{Filters}

Throughout, let $X$ be a set and $\mcP(X)$ denote its powerset.

\begin{definition} We say a set $\mcF \subseteq \mcP(X)$ is a \underline{filter} on $X$ if
\begin{enumerate}
	\item $X \in \mcF$,
	\item If $A \subseteq B$ and $A \in \mcF$, then $B \in \mcF$, and
	\item If $A,B \in \mcF$, then $A \cap B \in \mcF$.
\end{enumerate}
We say that $\mcF$ is \underline{proper} if $\mcF \neq \mcP(X)$. We say that $\mcF$ is an \underline{ultrafilter} if it is maximal among proper filters. \end{definition}

\begin{lem} $\mcP(X)$ is a filter on $X$. \end{lem}
\begin{proof}
	Obvious.
\end{proof}

\begin{lem} Let $\{ F_i \}_i$ be a collection of filters on $X$, indexed by $i$ in some index set. Then $\bigcap_i F_i$ is a filter. \end{lem}
\begin{proof}
	Let $F = \bigcap_i F_i$. Since $X \in F_i$ for all $i$, $X \in F$. If $A \subseteq B$ and $A \in F$, then $A \in F_i$ for all $i$, so $B \in F_i$ for all $i$, whence $B \in F$. Finally, if $A,B \in F$, then $A,B \in F_i$ for all $i$, so $A \cap B \in F_i$ for all $i$, whence $A \cap B \in F$.
\end{proof}

\begin{definition} For $S \subseteq \mcP(X)$, let $\bar{S}$ denote the intersection of all filters containing $S$. We'll call this the \underline{filter generated by $S$}. The previous two lemmas imply that this is indeed a filter. \end{definition}

\begin{definition} Let $S \subseteq \mcP(X)$. We'll call $\hat{S} = \{ A \subseteq X \mid \exists B \in S : A \subseteq B \}$ the \underline{upward closure} of $S$. We'll call $S_{\cap} = \{ A_1 \cap \cdots \cap A_n \mid A_1,\ldots,A_n \in S \}$ the \underline{finite intersection closure} of $S$. \end{definition}

\begin{lem} Let $\emptyset \neq S \subseteq \mcP(X)$. Then $\bar{S} = (\hat{S})_{\cap}$. \end{lem}
\begin{proof}
	$(\subseteq)$. For this containment, it suffices to show that $(\hat{S})_{\cap}$ is a filter containing $S$. Clearly it contains $S$, so we need to show it is a filter. It is clear that $X \in (\hat{S})_{\cap}$ since $X \in \hat{S}$ since $S$ is nonempty.
	
	Suppose now that $A \in (\hat{S})_{\cap}$ and that $B \supseteq A$. Then $A = A_1 \cap \cdots \cap A_n$ for some $A_1,\ldots,A_n \in \hat{S}$ and $A_i \supseteq C_i$ for some $C_1,\ldots,C_n \in S$. Then $B \cup C_i \in \hat{S}$ for each $i$ since $B \cup C_i \supseteq C_i$, and
	\[ (B \cup C_1) \cap \cdots \cap (B \cup C_n) = B \cup (C_1 \cap \cdots \cap C_n) = B \]
	since $C_1 \cap \cdots \cap C_n \subseteq A_1 \cap \cdots \cap A_n = A \subseteq B$. This shows that $B \in (\hat{S})_{\cap}$.
	
	Second, if $A_1 \cap \cdots \cap A_n,A_{n+1} \cap \cdots \cap A_{n+m} \in (\hat{S})_{\cap}$, then it is immediate that their intersection is $A_1 \cap \cdots \cap A_{n+m} \in (\hat{S})_{\cap}$. This completes the argument that $(\hat{S})_{\cap}$ is a filter. \\
	
	$(\supseteq)$. Let $A_1 \cap \cdots \cap A_n \in (\hat{S})_{\cap}$. As before, $A_i \supseteq B_i$ for some $B_1,\ldots,B_n \in S$. Then, $\bar{S}$ is a filter containing $S$, so it contains each $B_i$, so it contains each $A_i$, and so it contains their intersection.
\end{proof}

\begin{lem} Let $S \subseteq \mcP(X)$ such that $B_1 \cap \cdots \cap B_n \neq \emptyset$ for every $n$-tuple $B_1,\ldots,B_n \in S$. Then the filter generated by $S$ is proper. \end{lem}
\begin{proof}
	It suffices to show that $\emptyset \notin \bar{S}$. So, it suffices to show that $A_1 \cap \cdots \cap A_n \neq \emptyset$ for each $n$-tuple $A_1,\ldots,A_n \in \hat{S}$. But each $A_i$ contains a $B_i \in S$, so $A_1 \cap \cdots \cap A_n \supseteq B_1 \cap \cdots \cap B_n \neq \emptyset$, so we're done.
\end{proof}

\begin{lem} Every proper filter is contained in an ultrafilter. \end{lem}
\begin{proof}
	Let $F$ be a proper filter, and consider the collection of proper filters containing $F$. This is clearly nonempty since it contains $F$ itself, and is partially ordered by inclusion. Suppose $\{F_i\}$ is a nonempty chain, and let $F = \bigcup_i F_i$. Then I claim that $F$ is a proper filter containing each $F_i$. Indeed, since the chain is nonempty, $X \in F$ since it's in each $F_i$ (and there's at least one). If $A \subseteq B$ and $A \in F$, then $A \in F_i$ for some $i$, whence $B \in F_i$, so $B \in F$. If $A,B \in F$, then $A \in F_i$ for some $i$ and $B \in F_j$ for some $j$. Since this is a chain, we have WLOG that $F_i \subseteq F_j$, so $A,B \in F_j$, whence $A \cap B \in F_j$, so $A \cap B \in F$ as desired.
	
	So, by Zorn's lemma, this collection has a maximal element $G$. That is, $G$ is maximal among filters containing $F$. In fact, this implies that $G$ is maximal among all filters, for if $G' \supseteq G$, then $G' \supseteq F$, so $G'$ is in the above collection, and the maximality of $G$ implies $G = G'$. So, $G$ is in fact an ultrafilter.
\end{proof}

Combining the previous two lemmas tells us that if $S$ has nonempty finite intersections, then it's contained in an ultrafilter.

\begin{lem} If $A \subseteq X$ and $F$ is an ultrafilter, then exactly one of $A,X \setminus A \in F$. \end{lem}
\begin{proof}
	First, it is clear that $F$ cannot contain both $A,X \setminus A$. Indeed, if it did, $F$ would contain the intersection, which is empty. But then $F$ contains all of its supersets, so $F$ is not proper.
	
	If $A \in F$, then we're done, so suppose $A \notin F$. Let $S = F \cup \{A\}$. Then $\bar{S}$ is a filter properly containing $F$, but $F$ is an ultrafilter, so $\bar{S} = \mcP(X)$. In particular, $\emptyset \in \bar{S} = (\hat{S})_{\cap}$. So, by the above lemma, there exist $B_1,\ldots,B_n \in S$ such that $B_1 \cap \cdots \cap B_n = \emptyset$. If all of these were in $F$, then $F$ would contain the empty set and not be proper. So, at least one of these must be $A$ itself, and after removing redundancies and recognizing that $F$ is closed under finite intersections, we conclude that $A \cap B = \emptyset$ for some $B \in F$. Hence, $B \subseteq X \setminus A$, and since $F$ is a filter, $X \setminus A \in F$ as claimed.
\end{proof}

\section*{Returning to the problem}

Let's return to the problem.

\begin{thm} Let $R = \prod_p \FF_p$, with $p$ ranging over the set of all prime numbers. Then $R$ has a maximal ideal $\frm$ for which the field $R/\frm$ has characteristic zero and contains an algebraic closure of $\QQ$. \end{thm}
\begin{proof}
	Let $X = \Spec\ZZ$. For $f \in \ZZ[x]$ nonconstant and monic, let
	\[ Z_f = \{ p \in X \mid f \text{ has a root in } \FF_p \} \]
	Then, take
	\[ S = \{ Z_f \mid f \in \ZZ[x] \text{ nonconstant and monic.} \} \]
	I claim first that for $A_1,\ldots,A_n \in S$, $A_1 \cap \cdots \cap A_n \neq \emptyset$. In other words, $Z_{f_1} \cap \cdots \cap Z_{f_n} \neq \emptyset$. We may assume that each $f_i$ is irreducible, since a root of an irreducible factor of $f_i$ is also a root of $f_i$. Since we're in characteristic zero, they're each separable. Now, choose $f$ to be the least common multiple of $f_1,\ldots,f_n$. Then, $f$ is also separable, so by Chebotarev, $f$ splits completely in some $\FF_p[x]$. I.e. $f_i$ has a root modulo $p$ for each $i$, so $p \in Z_{f_1} \cap \cdots \cap Z_{f_n}$.
	
	So, by the corresponding lemma in the previous section, $\bar{S}$ is a proper filter, and so $\bar{S} \subseteq F$ for some ultrafilter $F$. An element $\alpha \in R$ is a sequence $(\alpha_p)_{p \in X}$ such that $\alpha_p \in \FF_p$. Define
	\[ Y_\alpha = \{ p \in X \mid \alpha_p = 0 \} \]
	and
	\[ \frm = \{ \alpha \in R \mid Y_\alpha \in F \} \]
	To finish, we should show that $\frm$ is a maximal ideal and that $R/\frm$ contains an algebraic closure of $\QQ$.
	
	First, suppose $\alpha,\beta \in \frm$. Then $Y_{\alpha+\beta} \supseteq Y_\alpha \cap Y_\beta$, since $\alpha_p = \beta_p = 0$ means $(\alpha+\beta)_p = 0$. But $F$ is a filter, so $Y_\alpha,Y_\beta \in F$ means $Y_\alpha \cap Y_\beta \in F$ and so $Y_{\alpha+\beta} \in F$, whence $\alpha+\beta \in \frm$. Similarly, if $\alpha \in \frm$ and $\beta \in R$, then $Y_{\alpha\beta} \supseteq Y_\alpha$ since $\alpha_p = 0$ means $(\alpha\beta)_p = 0$. So, again, $Y_{\alpha\beta} \in F$, so $\alpha\beta \in \frm$. This shows that $\frm$ is an ideal.
	
	Now, suppose $\alpha \notin \frm$. Then $Y_\alpha \notin F$, and since it's an ultrafilter, the complement $X \setminus Y_\alpha$ is in $F$. Define
	\[ \beta_p = \begin{cases} 1 & \text{if } p \in Y_\alpha \\ 0 & \text{otherwise} \end{cases} \]
	Then $Y_\beta = X \setminus Y_\alpha$, so $\beta \in \frm$. Then, $\alpha_p + \beta_p = (\alpha+\beta)_p \neq 0$ for any $p$, since exactly one of the summands is zero and one is nonzero for each $p$. Thus, $\alpha+\beta$ is a unit, showing that $\frm$ is maximal.
	
	Finally, we should show that $R/\frm$ contains an algebraic closure of $\QQ$. It suffices to show that $R/\frm$ contains all algebraic integers. That is, we should show that if $f(x) \in \ZZ[x]$ is monic and irreducible, then $R/\frm$ contains a root of $f$. Now, for each $p \in Z_f$, $f$ has a root in $\FF_p$, say $\alpha_p$. For the remaining $p \in X$, define $\alpha_p$ arbitrarily. This specifies an element $\alpha \in R$. Further, we have that $Y_{f(\alpha)} \supseteq Z_f$ since
	\[ f(\alpha)_p = f(\alpha_p) = 0 \]
	for $p \in Z_f$. Hence $Y_{f(\alpha)} \in F$, so $f(\alpha) \in \frm$. But this shows that $f(\alpha) = 0$ in $R/\frm$ as desired, completing the proof.
\end{proof}

\end{document}
