Guiding this document are two problems:

\begin{exercise} Prove quadratic reciprocity by considering the splitting of a prime $p$ in $\QQ(\sqrt{\pm q})$. \end{exercise}

and

\begin{exercise} Construct an explicit example of a number field $K/\QQ$ such that $\mcO_K$ is not generated by a single element. \end{exercise}

First, a warmup: proving the $-1$ case of quadratic reciprocity:

\begin{thm} Let $p$ be an odd prime. Then $\lgnd{-1}{p} = (-1)^{(p-1)/2}$. \end{thm}
\begin{proof}
	Consider the ideal $p\ZZ[i] \subseteq \ZZ[i]$. Since $p \nmid 4 = \disc(\ZZ[i])$, we have that $p$ is unramified, so $p$ splits as a product
	\[ p\ZZ[i] = P_1\cdots P_r \]
	in $\ZZ[i]$. Then, the sum of the inertial degrees is 2 since we have a degree 2 extension. I.e. we either have $p\ZZ[i] = P_1P_2$ with $f(P_1|p) = f(P_2|p) = 1$ or else $P_1 = p\ZZ[i]$ is itself prime of inertial degree 2. In either case, we compute the inertial degree directly.
	
	Namely, let $P$ be a prime lying over $p$, and let $f$ be the inertial degree. Then, by definition, $\ZZ[i]/P$ is a degree $f$ extension of $\ZZ/p\ZZ = \FF_p$. We thus know that the Galois group is generated by the Frobenius automorphism $x \mapsto x^p$. But any map of $\ZZ[i]/P$ is determined by the image of $i$, and $i^p = \pm i$ with the plus sign holding iff $p \equiv 1 \pmod{4}$. Thus, $f$, the order of the Galois group, is 1 iff $p \equiv 1 \pmod{4}$.
	
	That is, we have $p \equiv 1 \pmod{4}$ iff $p\ZZ[i]$ is not prime. But we can characterize this as well:
	\[ \ZZ[i]/p\ZZ[i] \cong \ZZ[x]/(x^2+1,p) \cong \FF_p[x]/(x^2+1) \]
	so $p\ZZ[i]$ is not prime iff $x^2+1$ is reducible in $\FF_p$. Since it is of degree 2, this can only happen by having a root, i.e. $p \equiv 1 \pmod{4}$ iff there is some $a \in \FF_p$ with $a^2+1=0$, i.e. $a^2=-1$, so $-1$ is a quadratic residue. This gives the result.
\end{proof}

The general case is similar, except that we don't have the coincidence that $\sqrt{-1} = \zeta_4$. I.e. if we adjoin a square root of $\pm q$, it may not be easy to understand its multiplicative order mod a prime in that ring, whereas understanding powers of $\sqrt{-1}$ is quite easy. This is the additional work, for which we embed in a cyclotomic field.

\begin{thm} Let $p,q$ be distinct odd primes. Then $\lgnd{p}{q}\lgnd{q}{p} = (-1)^{(p-1)(q-1)/4}$. \end{thm}
\begin{proof}
	Let $q^\ast$ denote $\pm q$ with the plus sign holding iff $q \equiv 1 \pmod{4}$. Then, note that
	\[ K = \QQ(\sqrt{q^\ast}) \subseteq \QQ(\zeta_q) = L \]
	as we've previously shown. We have $\disc(\zeta_q) = \pm q^{q-2}$ is not divisible by $p$, and so $p$ is unramified in $L$, whence it is also unramified in $K$ since ramification indices are multiplicative in towers. Since $L/\QQ$ is Galois, $p\ZZ[\zeta_q]$ is the product of $r = (q-1)/f$ distinct primes, where $f$ is the common inertial degree of all primes of $\ZZ[\zeta_q]$ lying over $p$. Fix such a prime $P$.
	
	Now, we consider automorphisms of two related fields. First, we have that $\ZZ[\zeta_q]/P$ is a degree $f$ extension of $\FF_p$, and so the Galois group is generated again by the Frobenius map $\sigma(x) = x^p$. Second, we have an automorphism $\tau$ of $L/\QQ$ given by $\zeta_q \mapsto \zeta_q^p$. I claim these maps have the same order in their respective groups. The order of $\sigma$ is $f$, and let $u$ be the order of $\tau$.
	
	One direction is clear. Since $\tau^u = 1$,
	\[ \zeta_q = \tau^u(\zeta_q) = \zeta_q^{p^u} \]
	Since $\sigma$ is a map from $\ZZ[\zeta_q]/P$, it is determined by the image of (the coset) $\zeta_q + P$. But
	\[ \sigma^u(\zeta_q + P) = \zeta_q^{p^u} + P = \zeta_q + P \]
	so we must have $\sigma^u = 1$ as well. Thus $f \mid u$. Conversely, since $\sigma^f = 1$, we have $\zeta_q + P = \sigma^f(\zeta_q + P) = \zeta_q^{p^f}+P$, so $\zeta_q(\zeta_q^n-1) \in P$ for $n = p^f-1$. Since $P$ is prime, one of these factors is in $P$, but $\zeta_q$ is a unit, so it cannot be in $P$. Thus $\zeta_q^n-1 \in P$. This only depends on the residue of $n$ mod $q$, and so $\zeta_q^n-1$ is one of the terms:
	\[ \zeta_q^0-1,\zeta_q^1-1,\ldots,\zeta_q^{q-1}-1 \]
	If it is not the first of these, then we get that the product of the remaining ones is also in $P$. I.e., $P$ contains:
	\[ \prod_{i=1}^{q-1} (\zeta_q^i-1) = q \]
	But then $P$ contains both $p$ and $q$, and so it contains $\gcd(p,q) = 1$ since the gcd is a $\ZZ$-linear combination of its arguments, contradicting the properness of $P$. Thus we must have that $\zeta_q^n-1 = \zeta_q^0-1 = 0$, so that
	\[ \tau^f(\zeta_q) = \zeta_q^{p^f} = \zeta_q^{n+1} = \zeta_q \]
	so that $\tau^f = 1$. So $u \mid f$ and we get $u=f$ as claimed.
	
	With this established, let us first consider the case that $\lgnd{p}{q} = 1$. Then $\tau$ is contained in the (unique) index 2 subgroup $H$ of the Galois group of $L/\QQ$. So, the fixed fields are contained in the reverse order. The fixed field of $\tau$ is the unique subfield of $L$ of degree $(q-1)/f = r$ over $\QQ$, and the fixed field of $H$ is the unique subfield of $L$ of degree 2 over $\QQ$. The former field must be $L_D$, the decomposition field of $P$ over $p$, and the latter must be $K$. So, we get that $K \subseteq L_D$. Since inertial degrees are multiplicative in towers and each prime of $L_D$ lying over $p$ has inertial degree 1, this gives that each prime lying over $p$ in $K$ also has inertial degree 1. Thus, there must be two primes there, i.e. $p\mcO_K = P_1P_2$. Then $p\mcO_K$ is not prime, and so
	\[ \mcO_K/p\mcO_K = \ZZ\left.\left[\frac{1+\sqrt{q^\ast}}{2}\right]\right/(p) \cong \ZZ[x]\left/\left(x^2-x+\frac{1-q^\ast}{4},p\right)\right. \cong \FF_p[x]\left/\left(x^2-x+\frac{1-q^\ast}{4}\right)\right. \]
	is not a domain, i.e. the last polynomial has a root $a \in \FF_p$. Then,
	\[ (2a-1)^2 = 4a^2-4a+1 = (q^\ast-1)+1 = q^\ast \]
	so that $\lgnd{q^\ast}{p} = 1$.
	
	But this proof essentially also works in reverse. Indeed, if $\lgnd{q^\ast}{p} = 1$, then there is some $b \in \FF_p$ with $b^2 = q^\ast$, whence
	\[ \left(\frac{1+b}{2}\right)^2-\left(\frac{1+b}{2}\right)+\frac{1-q^\ast}{4} = \frac{1+2b+b^2}{4}-\frac{2+2b}{4}+\frac{1-q^\ast}{4} = 0 \]
	so that $x^2-x+(1-q^\ast)/4$ is reducible. Thus $\mcO_K/p\mcO_K$ is not a domain, so $p\mcO_K$ is not prime, and since $p$ is unramified, the only possibility is that $p\mcO_K = P_1P_2$ for some distinct primes $P_1,P_2$ of $\mcO_K$. But $L_D$ is the largest subfield of $L$ with ramification index and inertial degree 1, so this gives that $K \subseteq L_D$, and so $H \supseteq D$, where $D$ is the decomposition group. But the order of $\tau$ is $f = |D|$, and since there is a unique subgroup of this order, we must have $\tau$ generates $D$. In particular, it is an element of $D$, and so $\tau \in H$. But the elements of $H$ are precisely the squares, so $\tau = \gamma^2$ for some automorphism $\gamma$. Every automorphism of $L/\QQ$ is of the form $\zeta_q \mapsto \zeta_q^t$, and so for these to be the same automorphism we must have $p \equiv t^2 \pmod{q}$, so that $\lgnd{p}{q} = 1$.

	So, we've shown $\lgnd{p}{q} = \lgnd{q^\ast}{p}$. This completes the proof. Indeed, if $q \equiv 1 \pmod{4}$, then $q^\ast = q$, and so
	\[ \lgnd{p}{q}\lgnd{q}{p} = \lgnd{p}{q}\lgnd{q^\ast}{p} = 1 = (-1)^{(p-1)(q-1)/4} \]
	since $p$ is odd. On the other hand, if $q \equiv 3 \pmod{4}$, then $q^\ast = -q$ and we know $\lgnd{-1}{p} = (-1)^{(p-1)/2}$. So,
	\[ \lgnd{p}{q}\lgnd{q}{p} = \lgnd{p}{q}\lgnd{q^\ast}{p}\lgnd{-1}{p} = (-1)^{(p-1)/2} = (-1)^{(p-1)(q-1)/4} \]
	since $(q-1)/2$ is odd.
\end{proof}

Note that in the proof we've shown that for $p,q$ distinct primes (and $p$ not necessarily odd) that if $P \subseteq \ZZ[\zeta_q]$ lies over $p$, then $f(P|p)$ is the multiplicative order of $p$ modulo $q$, since this is the common value $f$ of the orders of $\sigma,\tau$ above. This will be useful for the other stated exercise: namely, the existence of non-monogenic rings of integers.

First, note that Marcus' Number Fields gives such an example explicitly (with no mention on how to find such examples for oneself): \\

\hrule

\input{Chapters/2/30.tex}

\hrule

${}$ \\

This exercise is relatively unenlightening at first, but let us recast it in the language of factorization of ideals: we've shown that for $K = \QQ(\sqrt{7},\sqrt{10})$, that 3 splits as the product of at least four different primes. Namely, for each $i$, there is a prime $P_i$ lying over 3 that contains $\alpha_j$ for $j \neq i$ but doesn't contain $\alpha_i$. Indeed, if $\alpha_i$ were in each prime lying over $3$, and there are $r$ of them (counting multiplicities), then $\alpha_i^r$ would be in their product, which is $(3)$, contrary to assumption. So, there is a $P_i$ lying over $(3)$ with $\alpha_i \notin P_i$ and then for each $j$, $\alpha_i\alpha_j \in (3) \subseteq P_i$ implies that $\alpha_j \in P_i$.

Further, we have in the above case that 3 is unramified. One way to see this is to compute
\[ \disc(1,\sqrt{7},\sqrt{10},\sqrt{70}) = 4^4 \cdot 7 \cdot 10 \cdot 70 \]
which is not divisible by $3$. Thus, $\disc(\mcO_K)$ is also not divisible by 3 (though it might not equal the above). Hence, the factorization is into at least 4 distinct primes. But because this is a degree four extension, there are exactly 4, each of inertial degree 1. That is,
\[ 3\mcO_K = P_1P_2P_3P_4 \]
By the Chinese Remainder Theorem, this gives:
\[ \mcO_K/3\mcO_K \cong \bigoplus_{i=1}^4 \mcO_K/P_i \cong (\FF_3)^4 \]
Finally, assume that $\mcO_K = \ZZ[\alpha]$ is monogenic. Then, we get a surjection $\ZZ[x] \to \mcO_K \to \mcO_K/3$ by mapping $x$ to $\alpha$ and composing with the quotient map. But clearly 3 is in the kernel of this map, and from the above, we also see that $x^3-x$ is in the kernel, since each element of $\FF_3$ satisfies $t^3-t$. So, the map factors as a surjection:
\[ \ZZ[x]/(3,x^3-x) \to (\FF_3)^4 \]
but the former has $3^3$ elements while the latter has $3^4$. This gives the contradiction.

More generally, if we can find a number field $K$ such that $[K:\QQ] > p$ for some prime $p$ that splits completely, we'll have the same contradiction. Indeed, the above map will instead become a surjection:
\[ \ZZ[x]/(p,x^p-x) \to (\FF_p)^{[K:\QQ]} \]
which is impossible. We'll use this to construct our own example for $p=2$.

\begin{thm} There exists (another) number field $K$ with $\mcO_K$ not monogenic. \end{thm}
\begin{proof}
	Consider $L = \QQ(\zeta_p)$ for an unspecified odd prime $p$. We'll construct $K$ as an appropriate subfield of $L$. First, note that $\disc(\zeta_p) = p^{p-2}$, so that $2$ is unramified in $L$ and so will also be unramified in $K$. We'd also like the inertial degree to be $1$ for any prime lying over $2$, so we fix a prime $Q$ of $L$ lying over $2$ and let $K$ be the decomposition field of $Q$. Then, it is a standard result that $[K:\QQ]$ is the number of prime factors appearing in the factorization of $2$ in $L$, which equals $(p-1)/f$ for $f$ the inertial degree of $Q$ over 2. But $f$ is also the multiplicative degree of $2$ modulo $p$ by our work above.
	
	So, overall, we'd like $2$ to have order $f$ modulo $p$ for some prime satisfying $f \mid p-1$. Testing some primes directly, we see that $2^5 \equiv 1 \pmod{31}$, and $5 \mid 31-1 = 30$. So, we let $p=5$.
	
	In other words, let $K$ be the unique subgroup of $\QQ(\zeta_{31})$ of degree $6$ over $\QQ$. Then $2$ splits completely in $K$ and the remarks preceding the proof show that $\mcO_K$ is not monogenic.
\end{proof}











