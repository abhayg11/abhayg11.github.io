{% if page.mathjax %}
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ["script","noscript","style","textarea"],
    inlineMath: [['$', '$'], ['`$', '$`'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['`$$', '$$`'], ['\\[', '\\]']]
  }
});
MathJax.Hub.Register.LoadHook("[MathJax]/extensions/tex2jax.js", function () {
  var TEX2JAX = MathJax.Extension.tex2jax;
  TEX2JAX._createMathTag = TEX2JAX.createMathTag;
  TEX2JAX.createMathTag = function (mode, tex) {
    const math = this._createMathTag(mode, tex);
    const code = math.parentNode;
    if (code.nodeName === 'CODE' && code.childNodes.length <= 3) {
      const span = document.createElement('mjx-span');
      code.parentNode.replaceChild(span, code);
      span.appendChild(math);
    }
    return math;
  };
});
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS_CHTML" defer></script>
{% endif %}
